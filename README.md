# Query Server для Myth of Empires

Этот проект представляет собой сервер запросов (query server) для игры Myth of Empires (MOE). Он позволяет получать информацию о сервере, количестве игроков и других данных, аналогично системе Source Query, используемой в играх на движке Source.

## Основные компоненты

### 1. QueryServer
Основной класс сервера, который принимает UDP-запросы и обрабатывает их. Поддерживает следующие типы запросов:
- A2S_INFO: Возвращает информацию о сервере (название, карта, количество игроков и т.д.)
- A2S_SERVERQUERY_GETCHALLENGE: Запрос на получение уникального номера для запросов о игроках
- A2S_PLAYER: Запрос на получение информации об игроках на сервере

### 2. GameVersionChecker
Класс для проверки обновлений игры через SteamCMD. Проверяет наличие новых версий каждые 60 минут и уведомляет о необходимости обновления каждые 5 минут.

### 3. LogParser
Система парсинга логов сервера, которая отслеживает входы и выходы игроков из игры, чтобы предоставить актуальную информацию о текущих игроках.

### 4. PlayerHandler
Обработчик данных о игроках, который отслеживает текущих онлайн-игроков, используя информацию из логов сервера.

### 5. Защита от DDoS
Реализована система защиты от DDoS-атак, которая отслеживает количество запросов от IP-адресов и блокирует подозрительные адреса.

## Конфигурация

Все настройки находятся в файле `config/settings.py`:
- IP-адрес и порты сервера
- Пути к лог-файлам
- Параметры защиты от DDoS
- Путь к SteamCMD
- Настройки версии игры

## Запуск

Для запуска сервера используйте команду:
```
python main.py
```

Для запуска веб-интерфейса используйте команду:
```
python app.py
```
После запуска веб-интерфейс будет доступен по адресу: http://127.0.0.1:5000

## Протокол взаимодействия

Сервер реализует протокол Source Query, который используется многими инструментами для получения информации о игровых серверах.

## Особенности

- Поддержка нескольких файлов логов для отслеживания состояния сцен-серверов
- Автоматическое обновление информации о версии игры
- Система мониторинга игроков в реальном времени
- Защита от DDoS-атак